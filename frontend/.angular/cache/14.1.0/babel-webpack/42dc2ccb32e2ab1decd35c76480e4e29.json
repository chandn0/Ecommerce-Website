{"ast":null,"code":"import _classCallCheck from \"C:/Users/boina/Desktop/working/ecommerce-eshop/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/boina/Desktop/working/ecommerce-eshop/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { OrderService } from \"../../services/order.service\";\nimport { OrderStatus } from \"../../enum/OrderStatus\";\nimport { UserService } from \"../../services/user.service\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { Role } from \"../../enum/Role\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../services/order.service\";\nimport * as i3 from \"../../services/user.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\n\nfunction OrderComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 3);\n    i0.ɵɵtext(1, \"Status\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 3);\n    i0.ɵɵtext(1, \"Cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 3);\n    i0.ɵɵtext(1, \"Action\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_tr_15_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var order_r4 = i0.ɵɵnextContext().$implicit;\n    var ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.OrderStatus[order_r4.orderStatus], \"\");\n  }\n}\n\nfunction OrderComponent_tr_15_td_9_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function OrderComponent_tr_15_td_9_a_1_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      var order_r4 = i0.ɵɵnextContext(2).$implicit;\n      var ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.cancel(order_r4));\n    });\n    i0.ɵɵtext(1, \"Cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_tr_15_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 9);\n    i0.ɵɵtemplate(1, OrderComponent_tr_15_td_9_a_1_Template, 2, 0, \"a\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var order_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", order_r4.orderStatus == 0);\n  }\n}\n\nfunction OrderComponent_tr_15_td_10_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 13);\n    i0.ɵɵtext(1, \" Show\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var order_r4 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/order/\", order_r4.orderId, \"\");\n  }\n}\n\nfunction OrderComponent_tr_15_td_10_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function OrderComponent_tr_15_td_10_a_2_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      var order_r4 = i0.ɵɵnextContext(2).$implicit;\n      var ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.cancel(order_r4));\n    });\n    i0.ɵɵtext(1, \"Cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_tr_15_td_10_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function OrderComponent_tr_15_td_10_a_3_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      var order_r4 = i0.ɵɵnextContext(2).$implicit;\n      var ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.finish(order_r4));\n    });\n    i0.ɵɵtext(1, \" Finish\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_tr_15_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 9);\n    i0.ɵɵtemplate(1, OrderComponent_tr_15_td_10_a_1_Template, 2, 1, \"a\", 12);\n    i0.ɵɵtemplate(2, OrderComponent_tr_15_td_10_a_2_Template, 2, 0, \"a\", 10);\n    i0.ɵɵtemplate(3, OrderComponent_tr_15_td_10_a_3_Template, 2, 0, \"a\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var order_r4 = i0.ɵɵnextContext().$implicit;\n    var ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r7.currentUser.role == ctx_r7.Role.Customer && ctx_r7.currentUser.name == order_r4.buyerEmail));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", order_r4.orderStatus == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.currentUser.role != ctx_r7.Role.Customer && order_r4.orderStatus == 0);\n  }\n}\n\nfunction OrderComponent_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 6);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 6);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, OrderComponent_tr_15_td_8_Template, 2, 1, \"td\", 7);\n    i0.ɵɵtemplate(9, OrderComponent_tr_15_td_9_Template, 2, 1, \"td\", 8);\n    i0.ɵɵtemplate(10, OrderComponent_tr_15_td_10_Template, 4, 3, \"td\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var order_r4 = ctx.$implicit;\n    var ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r4.buyerAddress);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r4.orderAmount);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 6, order_r4.createTime));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.currentUser.role != ctx_r3.Role.Customer && order_r4.orderStatus == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.currentUser.role != ctx_r3.Role.Customer && order_r4.orderStatus == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.currentUser.role != ctx_r3.Role.Customer && order_r4.orderStatus == 0);\n  }\n}\n\nexport var OrderComponent = /*#__PURE__*/(function () {\n  var OrderComponent = /*#__PURE__*/function () {\n    function OrderComponent(httpClient, orderService, userService, route) {\n      _classCallCheck(this, OrderComponent);\n\n      this.httpClient = httpClient;\n      this.orderService = orderService;\n      this.userService = userService;\n      this.route = route;\n      this.OrderStatus = OrderStatus;\n      this.Role = Role;\n    }\n\n    _createClass(OrderComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this.currentUser = this.userService.currentUserValue;\n        this.querySub = this.route.queryParams.subscribe(function () {\n          _this.update();\n        });\n      }\n    }, {\n      key: \"update\",\n      value: function update() {\n        var _this2 = this;\n\n        var nextPage = 1;\n        var size = 40;\n\n        if (this.route.snapshot.queryParamMap.get('page')) {\n          nextPage = +this.route.snapshot.queryParamMap.get('page');\n          size = +this.route.snapshot.queryParamMap.get('size');\n        }\n\n        this.orderService.getPage(nextPage, size).subscribe(function (page) {\n          return _this2.page = page;\n        }, function (_) {\n          console.log(\"Get Orde Failed\");\n        });\n      }\n    }, {\n      key: \"cancel\",\n      value: function cancel(order) {\n        this.orderService.cancel(order.orderId).subscribe(function (res) {\n          if (res) {\n            order.orderStatus = res.orderStatus;\n          }\n        });\n      }\n    }, {\n      key: \"finish\",\n      value: function finish(order) {\n        this.orderService.finish(order.orderId).subscribe(function (res) {\n          if (res) {\n            order.orderStatus = res.orderStatus;\n          }\n        });\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {}\n    }]);\n\n    return OrderComponent;\n  }();\n\n  OrderComponent.ɵfac = function OrderComponent_Factory(t) {\n    return new (t || OrderComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.OrderService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n  };\n\n  OrderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderComponent,\n    selectors: [[\"app-order\"]],\n    decls: 16,\n    vars: 4,\n    consts: [[\"align\", \"center\", 1, \"display-4\", \"mb-5\", 2, \"background-color\", \"#13bbee\"], [1, \"table\", \"text-center\"], [2, \"padding\", \"3px\"], [\"scope\", \"col\", 2, \"color\", \"blue\", \"font-size\", \"2rem\"], [\"scope\", \"col\", \"style\", \"color:blue ; font-size: 2rem;\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"align-middle\", 2, \"font-size\", \"1.5rem\"], [\"class\", \"align-middle\", \"style\", \"font-size:1.5rem ;\", 4, \"ngIf\"], [\"class\", \"align-middle\", 4, \"ngIf\"], [1, \"align-middle\"], [\"style\", \"display: block\", \"routerLink\", \"./\", \"style\", \"font-size:1rem ;\", 3, \"click\", 4, \"ngIf\"], [\"routerLink\", \"./\", 2, \"font-size\", \"1rem\", 3, \"click\"], [\"style\", \"display:\\n                      block;font-size:1rem;\", \"href\", \"\", 3, \"routerLink\", 4, \"ngIf\"], [\"href\", \"\", 2, \"display\", \"block\", \"font-size\", \"1rem\", 3, \"routerLink\"]],\n    template: function OrderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\", 0);\n        i0.ɵɵtext(1, \"Orders\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"table\", 1)(3, \"thead\")(4, \"tr\", 2)(5, \"th\", 3);\n        i0.ɵɵtext(6, \"Shipping Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"th\", 3);\n        i0.ɵɵtext(8, \"Total\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"th\", 3);\n        i0.ɵɵtext(10, \"Order Data\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, OrderComponent_th_11_Template, 2, 0, \"th\", 4);\n        i0.ɵɵtemplate(12, OrderComponent_th_12_Template, 2, 0, \"th\", 4);\n        i0.ɵɵtemplate(13, OrderComponent_th_13_Template, 2, 0, \"th\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"tbody\");\n        i0.ɵɵtemplate(15, OrderComponent_tr_15_Template, 11, 8, \"tr\", 5);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser.role != ctx.Role.Customer);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser.role != ctx.Role.Customer);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser.role != ctx.Role.Customer);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.page == null ? null : ctx.page.content);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i4.RouterLinkWithHref, i5.DatePipe]\n  });\n  return OrderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}