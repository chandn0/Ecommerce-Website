{"ast":null,"code":"import _classCallCheck from \"C:/Users/boina/Desktop/Finalproject/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/boina/Desktop/Finalproject/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { ProductService } from '../../services/product.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CartService } from '../../services/cart.service';\nimport { CookieService } from 'ngx-cookie-service';\nimport { ProductInOrder } from '../../models/ProductInOrder';\nimport { WishListService } from 'src/app/services/wish-list.service';\nimport { UserService } from '../../services/user.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/product.service\";\nimport * as i2 from \"../../services/cart.service\";\nimport * as i3 from \"ngx-cookie-service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/services/wish-list.service\";\nimport * as i6 from \"../../services/user.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\n\nfunction DetailComponent_button_35_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function DetailComponent_button_35_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      var ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.handleRemoveFromWishList(ctx_r12.productInfo.productId));\n    });\n    i0.ɵɵtext(1, \"Remove from wishlist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_36_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function DetailComponent_button_36_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      var ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.handleAddToWishList(ctx_r14.productInfo.productId));\n    });\n    i0.ɵɵtext(1, \"Add to wishlist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵtext(1, \"Add to Cart \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    var _r0 = i0.ɵɵreference(8);\n\n    i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\n  }\n}\n\nfunction DetailComponent_ng_template_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 23);\n    i0.ɵɵtext(1, \"Unavailable\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_73_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function DetailComponent_button_73_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      var ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.handleRemoveFromWishList(ctx_r16.productInfo.productId));\n    });\n    i0.ɵɵtext(1, \"Remove from wishlist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_74_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function DetailComponent_button_74_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      var ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.handleAddToWishList(ctx_r18.productInfo.productId));\n    });\n    i0.ɵɵtext(1, \"Add to wishlist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_75_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵtext(1, \"Add to Cart \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    var _r0 = i0.ɵɵreference(8);\n\n    i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\n  }\n}\n\nfunction DetailComponent_ng_template_76_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 23);\n    i0.ɵɵtext(1, \"Unavailable\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport var DetailComponent = /*#__PURE__*/(function () {\n  var DetailComponent = /*#__PURE__*/function () {\n    function DetailComponent(productService, cartService, cookieService, route, router, wishListService, userService) {\n      var _this = this;\n\n      _classCallCheck(this, DetailComponent);\n\n      this.productService = productService;\n      this.cartService = cartService;\n      this.cookieService = cookieService;\n      this.route = route;\n      this.router = router;\n      this.wishListService = wishListService;\n      this.userService = userService;\n      this.addedToWishlist = false;\n      this.userSubscription = this.userService.currentUser.subscribe(function (user) {\n        return _this.currentUser = user;\n      });\n    }\n\n    _createClass(DetailComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.getProduct();\n        this.title = 'Product Detail';\n        this.count = 1;\n      } // ngOnChanges(changes: SimpleChanges): void {\n      //   // Called before any other lifecycle hook. Use it to inject dependencies, but avoid any serious work here.\n      //   // Add '${implements OnChanges}' to the class.\n      //   console.log(changes);\n      //   if (this.item.quantity in changes) {\n      //   }\n      // }\n\n    }, {\n      key: \"getProduct\",\n      value: function getProduct() {\n        var _this2 = this;\n\n        var id = this.route.snapshot.paramMap.get('id');\n        this.productService.getDetail(id).subscribe(function (prod) {\n          _this2.productInfo = prod;\n        }, function (_) {\n          return console.log('Get Cart Failed');\n        });\n      }\n    }, {\n      key: \"addToCart\",\n      value: function addToCart() {\n        var _this3 = this;\n\n        this.cartService.addItem(new ProductInOrder(this.productInfo, this.count)).subscribe(function (res) {\n          if (!res) {\n            console.log('Add Cart failed' + res);\n            throw new Error();\n          }\n\n          _this3.router.navigateByUrl('/cart');\n        }, function (_) {\n          return console.log('Add Cart Failed');\n        });\n      }\n    }, {\n      key: \"validateCount\",\n      value: function validateCount() {\n        console.log('Validate');\n        var max = this.productInfo.productStock;\n\n        if (this.count > max) {\n          this.count = max;\n        } else if (this.count < 1) {\n          this.count = 1;\n        }\n      }\n    }, {\n      key: \"handleAddToWishList\",\n      value: function handleAddToWishList(productId) {\n        var _this4 = this;\n\n        console.log(\"started\");\n        this.cartService.addToWishList(productId).subscribe(function () {\n          _this4.addedToWishlist = true;\n        });\n        console.log(this.addedToWishlist);\n      }\n    }, {\n      key: \"handleRemoveFromWishList\",\n      value: function handleRemoveFromWishList(productId) {\n        var _this5 = this;\n\n        this.wishListService.removeFromWishList(productId).subscribe(function () {\n          _this5.addedToWishlist = false;\n        });\n      }\n    }]);\n\n    return DetailComponent;\n  }();\n\n  DetailComponent.ɵfac = function DetailComponent_Factory(t) {\n    return new (t || DetailComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.CartService), i0.ɵɵdirectiveInject(i3.CookieService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.WishListService), i0.ɵɵdirectiveInject(i6.UserService));\n  };\n\n  DetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DetailComponent,\n    selectors: [[\"app-detail\"]],\n    decls: 78,\n    vars: 34,\n    consts: [[1, \"row\", \"text-center\", \"justify-content-center\"], [1, \"col-lg-6\"], [1, \"card\", \"mb-4\"], [\"height\", \"60%\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\"], [1, \"text-primary\"], [\"name\", \"form\", 3, \"ngSubmit\"], [\"form\", \"ngForm\"], [\"hidden\", \"\", \"name\", \"productId\", 3, \"value\"], [1, \"card-test\"], [1, \"card-text\"], [\"id\", \"price\"], [\"type\", \"number\", \"name\", \"count\", \"required\", \"\", \"min\", \"1\", 3, \"ngModel\", \"max\", \"ngModelChange\", \"change\"], [\"id\", \"subtotal\"], [\"class\", \"btn btn-primary btn-lg\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"submit\", \"class\", \"btn btn-primary btn-lg\", 3, \"disabled\", 4, \"ngIf\", \"ngIfElse\"], [\"offBlock\", \"\"], [1, \"card\"], [\"alt\", \"brown couch\", 1, \"card__image\", 3, \"src\"], [1, \"card__content\"], [1, \"\"], [1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"disabled\"], [1, \"btn\", \"btn-secondary\", \"btn-lg\", \"disabled\"]],\n    template: function DetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"h4\", 5);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"form\", 6, 7);\n        i0.ɵɵlistener(\"ngSubmit\", function DetailComponent_Template_form_ngSubmit_7_listener() {\n          return (ctx.productInfo == null ? null : ctx.productInfo.productStatus) == 0 && ctx.addToCart();\n        });\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵelement(10, \"input\", 8);\n        i0.ɵɵelementStart(11, \"p\", 9)(12, \"strong\");\n        i0.ɵɵtext(13, \"Description: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\", 10)(16, \"strong\");\n        i0.ɵɵtext(17, \"Price: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"label\", 11);\n        i0.ɵɵtext(19);\n        i0.ɵɵpipe(20, \"currency\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"p\", 10)(22, \"strong\");\n        i0.ɵɵtext(23, \"Stock: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"label\", 10)(26, \"strong\");\n        i0.ɵɵtext(27, \"Quantity: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function DetailComponent_Template_input_ngModelChange_28_listener($event) {\n          return ctx.count = $event;\n        })(\"change\", function DetailComponent_Template_input_change_28_listener() {\n          return ctx.validateCount();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"p\", 10)(30, \"strong\");\n        i0.ɵɵtext(31, \"Subtotal: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"label\", 13);\n        i0.ɵɵtext(33);\n        i0.ɵɵpipe(34, \"currency\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(35, DetailComponent_button_35_Template, 2, 0, \"button\", 14);\n        i0.ɵɵtemplate(36, DetailComponent_button_36_Template, 2, 0, \"button\", 14);\n        i0.ɵɵtemplate(37, DetailComponent_button_37_Template, 2, 1, \"button\", 15);\n        i0.ɵɵtemplate(38, DetailComponent_ng_template_38_Template, 2, 0, \"ng-template\", null, 16, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(40, \"div\", 17);\n        i0.ɵɵelement(41, \"img\", 18);\n        i0.ɵɵelementStart(42, \"div\", 19)(43, \"h4\");\n        i0.ɵɵtext(44);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"form\", 6, 7);\n        i0.ɵɵlistener(\"ngSubmit\", function DetailComponent_Template_form_ngSubmit_45_listener() {\n          return (ctx.productInfo == null ? null : ctx.productInfo.productStatus) == 0 && ctx.addToCart();\n        });\n        i0.ɵɵelementStart(47, \"div\", 5);\n        i0.ɵɵelement(48, \"input\", 8);\n        i0.ɵɵelementStart(49, \"p\")(50, \"strong\");\n        i0.ɵɵtext(51, \"Description: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(52);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"p\")(54, \"strong\");\n        i0.ɵɵtext(55, \"Price: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"label\", 11);\n        i0.ɵɵtext(57);\n        i0.ɵɵpipe(58, \"currency\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(59, \"p\")(60, \"strong\");\n        i0.ɵɵtext(61, \"Stock: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(62);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(63, \"label\")(64, \"strong\");\n        i0.ɵɵtext(65, \"Quantity: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(66, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function DetailComponent_Template_input_ngModelChange_66_listener($event) {\n          return ctx.count = $event;\n        })(\"change\", function DetailComponent_Template_input_change_66_listener() {\n          return ctx.validateCount();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(67, \"p\", 20)(68, \"strong\");\n        i0.ɵɵtext(69, \"Subtotal: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(70, \"label\", 13);\n        i0.ɵɵtext(71);\n        i0.ɵɵpipe(72, \"currency\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(73, DetailComponent_button_73_Template, 2, 0, \"button\", 14);\n        i0.ɵɵtemplate(74, DetailComponent_button_74_Template, 2, 0, \"button\", 14);\n        i0.ɵɵtemplate(75, DetailComponent_button_75_Template, 2, 1, \"button\", 15);\n        i0.ɵɵtemplate(76, DetailComponent_ng_template_76_Template, 2, 0, \"ng-template\", null, 16, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        var _r4 = i0.ɵɵreference(39);\n\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.productInfo == null ? null : ctx.productInfo.productIcon, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.productInfo == null ? null : ctx.productInfo.productId);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productDescription);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(20, 26, ctx.productInfo == null ? null : ctx.productInfo.productPrice));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productStock);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.count)(\"max\", ctx.productInfo == null ? null : ctx.productInfo.productStock);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(34, 28, ctx.count * (ctx.productInfo == null ? null : ctx.productInfo.productPrice)));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && ctx.addedToWishlist);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && !ctx.addedToWishlist);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.productInfo == null ? null : ctx.productInfo.productStatus) == 0)(\"ngIfElse\", _r4);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.productInfo == null ? null : ctx.productInfo.productIcon, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.productInfo == null ? null : ctx.productInfo.productId);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productDescription);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(58, 30, ctx.productInfo == null ? null : ctx.productInfo.productPrice));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productStock);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.count)(\"max\", ctx.productInfo == null ? null : ctx.productInfo.productStock);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(72, 32, ctx.count * (ctx.productInfo == null ? null : ctx.productInfo.productPrice)));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && ctx.addedToWishlist);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && !ctx.addedToWishlist);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.productInfo == null ? null : ctx.productInfo.productStatus) == 0)(\"ngIfElse\", _r4);\n      }\n    },\n    dependencies: [i7.NgIf, i8.ɵNgNoValidate, i8.DefaultValueAccessor, i8.NumberValueAccessor, i8.NgControlStatus, i8.NgControlStatusGroup, i8.RequiredValidator, i8.MinValidator, i8.MaxValidator, i8.NgModel, i8.NgForm, i7.CurrencyPipe],\n    styles: [\"[_ngcontent-%COMP%]:root{--font-family-primary: \\\"Vollkorn\\\", serif;--font-family-secondary: \\\"PT Sans\\\", sans-serif;--font-size-title: 32px;--line-height-title: 1.4;--font-size-caption: 14px;--line-height-caption: 1.2;--color-text: #222022;--color-highlight-primary: #FFEF7E;--color-highlight-secondary: #B7F9E9;--border-radius-primary: 32px}body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;padding:0;margin:0}*[_ngcontent-%COMP%]{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@mixin mediaBig{@media (min-width: 576px) {@content;}}@include mediaBig{:root { --font-size-title: 40px; }}.card[_ngcontent-%COMP%]{max-width:960px;border-radius:var(--border-radius-primary);box-shadow:24px 24px 80px #0000001a;padding:20px 20px 28px;box-sizing:border-box;margin:20px;display:flex;flex-direction:column;@include mediaBig{flex-direction: row; align-items: center; margin: 40px; padding: 32px;}}.card__image[_ngcontent-%COMP%]{width:100%;max-height:300px;border-radius:var(--border-radius-primary);object-fit:cover;margin-bottom:18px;@include mediaBig{width: 45%; max-height: none; min-height: 400px; margin-bottom: 0;}}.card__content[_ngcontent-%COMP%]{@include mediaBig{width: 55%; padding-left: 40px;}}.card__date[_ngcontent-%COMP%]{display:block;font-family:var(--font-family-secondary);font-size:var(--font-size-caption);line-height:var(--line-height-caption);text-transform:uppercase;color:var(--color-text);margin-bottom:6px;@include mediaBig{margin-bottom: 8px;}}.card__title[_ngcontent-%COMP%]{font-family:var(--font-family-primary);font-size:var(--font-size-title);line-height:var(--line-height-title);color:var(--color-text);-webkit-box-decoration-break:clone;box-decoration-break:clone;background-image:linear-gradient(90deg,var(--color-highlight-primary),var(--color-highlight-secondary));background-size:100% 42%;background-repeat:no-repeat;background-position:0 85%;padding:0 4px;margin-left:-4px}\"]\n  });\n  return DetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}