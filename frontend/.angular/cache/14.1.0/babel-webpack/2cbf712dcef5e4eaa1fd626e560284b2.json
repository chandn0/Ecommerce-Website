{"ast":null,"code":"import _classCallCheck from \"C:/Users/boina/Desktop/Finalproject/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/boina/Desktop/Finalproject/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { ProductService } from '../../services/product.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CartService } from '../../services/cart.service';\nimport { CookieService } from 'ngx-cookie-service';\nimport { ProductInOrder } from '../../models/ProductInOrder';\nimport { WishListService } from 'src/app/services/wish-list.service';\nimport { UserService } from '../../services/user.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/product.service\";\nimport * as i2 from \"../../services/cart.service\";\nimport * as i3 from \"ngx-cookie-service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/services/wish-list.service\";\nimport * as i6 from \"../../services/user.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\n\nfunction DetailComponent_button_35_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function DetailComponent_button_35_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      var ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.handleRemoveFromWishList(ctx_r12.productInfo.productId));\n    });\n    i0.ɵɵtext(1, \"Remove from wishlist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_36_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function DetailComponent_button_36_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      var ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.handleAddToWishList(ctx_r14.productInfo.productId));\n    });\n    i0.ɵɵtext(1, \"Add to wishlist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵtext(1, \"Add to Cart \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    var _r0 = i0.ɵɵreference(8);\n\n    i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\n  }\n}\n\nfunction DetailComponent_ng_template_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 27);\n    i0.ɵɵtext(1, \"Unavailable\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_56_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function DetailComponent_button_56_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      var ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.handleRemoveFromWishList(ctx_r16.productInfo.productId));\n    });\n    i0.ɵɵtext(1, \"Remove from wishlist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_58_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function DetailComponent_button_58_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      var ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.handleAddToWishList(ctx_r18.productInfo.productId));\n    });\n    i0.ɵɵtext(1, \"Add to wishlist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 29);\n    i0.ɵɵtext(1, \"Add to Cart \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    var _r0 = i0.ɵɵreference(8);\n\n    i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\n  }\n}\n\nfunction DetailComponent_ng_template_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 27);\n    i0.ɵɵtext(1, \"Unavailable\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport var DetailComponent = /*#__PURE__*/(function () {\n  var DetailComponent = /*#__PURE__*/function () {\n    function DetailComponent(productService, cartService, cookieService, route, router, wishListService, userService) {\n      var _this = this;\n\n      _classCallCheck(this, DetailComponent);\n\n      this.productService = productService;\n      this.cartService = cartService;\n      this.cookieService = cookieService;\n      this.route = route;\n      this.router = router;\n      this.wishListService = wishListService;\n      this.userService = userService;\n      this.addedToWishlist = false;\n      this.userSubscription = this.userService.currentUser.subscribe(function (user) {\n        return _this.currentUser = user;\n      });\n    }\n\n    _createClass(DetailComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.getProduct();\n        this.title = 'Product Detail';\n        this.count = 1;\n      } // ngOnChanges(changes: SimpleChanges): void {\n      //   // Called before any other lifecycle hook. Use it to inject dependencies, but avoid any serious work here.\n      //   // Add '${implements OnChanges}' to the class.\n      //   console.log(changes);\n      //   if (this.item.quantity in changes) {\n      //   }\n      // }\n\n    }, {\n      key: \"getProduct\",\n      value: function getProduct() {\n        var _this2 = this;\n\n        var id = this.route.snapshot.paramMap.get('id');\n        this.productService.getDetail(id).subscribe(function (prod) {\n          _this2.productInfo = prod;\n        }, function (_) {\n          return console.log('Get Cart Failed');\n        });\n      }\n    }, {\n      key: \"addToCart\",\n      value: function addToCart() {\n        var _this3 = this;\n\n        this.cartService.addItem(new ProductInOrder(this.productInfo, this.count)).subscribe(function (res) {\n          if (!res) {\n            console.log('Add Cart failed' + res);\n            throw new Error();\n          }\n\n          _this3.router.navigateByUrl('/cart');\n        }, function (_) {\n          return console.log('Add Cart Failed');\n        });\n      }\n    }, {\n      key: \"validateCount\",\n      value: function validateCount() {\n        console.log('Validate');\n        var max = this.productInfo.productStock;\n\n        if (this.count > max) {\n          this.count = max;\n        } else if (this.count < 1) {\n          this.count = 1;\n        }\n      }\n    }, {\n      key: \"handleAddToWishList\",\n      value: function handleAddToWishList(productId) {\n        var _this4 = this;\n\n        console.log(\"started\");\n        this.cartService.addToWishList(productId).subscribe(function () {\n          _this4.addedToWishlist = true;\n        });\n        console.log(this.addedToWishlist);\n      }\n    }, {\n      key: \"handleRemoveFromWishList\",\n      value: function handleRemoveFromWishList(productId) {\n        var _this5 = this;\n\n        this.wishListService.removeFromWishList(productId).subscribe(function () {\n          _this5.addedToWishlist = false;\n        });\n      }\n    }]);\n\n    return DetailComponent;\n  }();\n\n  DetailComponent.ɵfac = function DetailComponent_Factory(t) {\n    return new (t || DetailComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.CartService), i0.ɵɵdirectiveInject(i3.CookieService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.WishListService), i0.ɵɵdirectiveInject(i6.UserService));\n  };\n\n  DetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DetailComponent,\n    selectors: [[\"app-detail\"]],\n    decls: 64,\n    vars: 25,\n    consts: [[1, \"row\", \"text-center\", \"justify-content-center\"], [1, \"col-lg-6\"], [1, \"card\", \"mb-4\"], [\"height\", \"60%\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\"], [1, \"text-primary\"], [\"name\", \"form\", 3, \"ngSubmit\"], [\"form\", \"ngForm\"], [\"hidden\", \"\", \"name\", \"productId\", 3, \"value\"], [1, \"card-test\"], [1, \"card-text\"], [\"id\", \"price\"], [\"type\", \"number\", \"name\", \"count\", \"required\", \"\", \"min\", \"1\", 3, \"ngModel\", \"max\", \"ngModelChange\", \"change\"], [\"id\", \"subtotal\"], [\"class\", \"btn btn-primary btn-lg\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"submit\", \"class\", \"btn btn-primary btn-lg\", 3, \"disabled\", 4, \"ngIf\", \"ngIfElse\"], [\"offBlock\", \"\"], [1, \"app\"], [\"href\", \"\"], [3, \"src\"], [1, \"text-center\"], [1, \"center\"], [\"id\", \"price\", 1, \"center\"], [\"class\", \"btn btn-primary btn-lg\", \"style\", \"align-self: center;\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"submit\", \"class\", \"btn btn-primary btn-lg\", \"style\", \"align-self: center;\", 3, \"disabled\", 4, \"ngIf\", \"ngIfElse\"], [1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"disabled\"], [1, \"btn\", \"btn-secondary\", \"btn-lg\", \"disabled\"], [1, \"btn\", \"btn-primary\", \"btn-lg\", 2, \"align-self\", \"center\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 2, \"align-self\", \"center\", 3, \"disabled\"]],\n    template: function DetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"h4\", 5);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"form\", 6, 7);\n        i0.ɵɵlistener(\"ngSubmit\", function DetailComponent_Template_form_ngSubmit_7_listener() {\n          return (ctx.productInfo == null ? null : ctx.productInfo.productStatus) == 0 && ctx.addToCart();\n        });\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵelement(10, \"input\", 8);\n        i0.ɵɵelementStart(11, \"p\", 9)(12, \"strong\");\n        i0.ɵɵtext(13, \"Description: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\", 10)(16, \"strong\");\n        i0.ɵɵtext(17, \"Price: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"label\", 11);\n        i0.ɵɵtext(19);\n        i0.ɵɵpipe(20, \"currency\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"p\", 10)(22, \"strong\");\n        i0.ɵɵtext(23, \"Stock: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"label\", 10)(26, \"strong\");\n        i0.ɵɵtext(27, \"Quantity: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function DetailComponent_Template_input_ngModelChange_28_listener($event) {\n          return ctx.count = $event;\n        })(\"change\", function DetailComponent_Template_input_change_28_listener() {\n          return ctx.validateCount();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"p\", 10)(30, \"strong\");\n        i0.ɵɵtext(31, \"Subtotal: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"label\", 13);\n        i0.ɵɵtext(33);\n        i0.ɵɵpipe(34, \"currency\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(35, DetailComponent_button_35_Template, 2, 0, \"button\", 14);\n        i0.ɵɵtemplate(36, DetailComponent_button_36_Template, 2, 0, \"button\", 14);\n        i0.ɵɵtemplate(37, DetailComponent_button_37_Template, 2, 1, \"button\", 15);\n        i0.ɵɵtemplate(38, DetailComponent_ng_template_38_Template, 2, 0, \"ng-template\", null, 16, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(40, \"div\", 17)(41, \"header\")(42, \"a\", 18);\n        i0.ɵɵelement(43, \"img\", 19);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(44, \"main\")(45, \"h1\");\n        i0.ɵɵtext(46);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"form\", 6, 7);\n        i0.ɵɵlistener(\"ngSubmit\", function DetailComponent_Template_form_ngSubmit_47_listener() {\n          return (ctx.productInfo == null ? null : ctx.productInfo.productStatus) == 0 && ctx.addToCart();\n        });\n        i0.ɵɵelementStart(49, \"div\", 20)(50, \"p\", 21);\n        i0.ɵɵtext(51);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(52, \"br\");\n        i0.ɵɵelementStart(53, \"label\", 22);\n        i0.ɵɵtext(54);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(55, \"br\");\n        i0.ɵɵtemplate(56, DetailComponent_button_56_Template, 2, 0, \"button\", 23);\n        i0.ɵɵelement(57, \"br\");\n        i0.ɵɵtemplate(58, DetailComponent_button_58_Template, 2, 0, \"button\", 23);\n        i0.ɵɵelement(59, \"br\");\n        i0.ɵɵtemplate(60, DetailComponent_button_60_Template, 2, 1, \"button\", 24);\n        i0.ɵɵelement(61, \"br\");\n        i0.ɵɵtemplate(62, DetailComponent_ng_template_62_Template, 2, 0, \"ng-template\", null, 16, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        var _r4 = i0.ɵɵreference(39);\n\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.productInfo == null ? null : ctx.productInfo.productIcon, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.productInfo == null ? null : ctx.productInfo.productId);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productDescription);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(20, 21, ctx.productInfo == null ? null : ctx.productInfo.productPrice));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productStock);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.count)(\"max\", ctx.productInfo == null ? null : ctx.productInfo.productStock);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(34, 23, ctx.count * (ctx.productInfo == null ? null : ctx.productInfo.productPrice)));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && ctx.addedToWishlist);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && !ctx.addedToWishlist);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.productInfo == null ? null : ctx.productInfo.productStatus) == 0)(\"ngIfElse\", _r4);\n        i0.ɵɵadvance(6);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.productInfo == null ? null : ctx.productInfo.productIcon, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productName);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.productInfo == null ? null : ctx.productInfo.productDescription, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Price:\", ctx.productInfo == null ? null : ctx.productInfo.productPrice, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && ctx.addedToWishlist);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && !ctx.addedToWishlist);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", (ctx.productInfo == null ? null : ctx.productInfo.productStatus) == 0)(\"ngIfElse\", _r4);\n      }\n    },\n    dependencies: [i7.NgIf, i8.ɵNgNoValidate, i8.DefaultValueAccessor, i8.NumberValueAccessor, i8.NgControlStatus, i8.NgControlStatusGroup, i8.RequiredValidator, i8.MinValidator, i8.MaxValidator, i8.NgModel, i8.NgForm, i7.CurrencyPipe],\n    styles: [\"[_ngcontent-%COMP%]:root{--var-padding: 1em;--highlight: hsl(230, 38%, 46%);--highlight-dark: hsl(230, 38%, 36%);--logo-width: 6em;--logo-offset: 1em;--main-column-width: 25em}*[_ngcontent-%COMP%]{box-sizing:border-box}.app[_ngcontent-%COMP%]{position:relative;padding-left:.5em;max-width:60em;background:hsl(220,35%,76%) 100% linear-gradient(hsl(252,2%,42%) 0%,hsl(0,5%,30%) 50%,hsl(220,35%,76%) 50%,hsl(220,35%,76%) 100%);background-size:auto 10em;background-repeat:repeat-x;background-position:center top}header[_ngcontent-%COMP%]{position:relative;height:8em;grid-row:1 / 3;grid-column:2;background:url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/154571/bla.jpg);background-size:cover;background-position:right center}img[_ngcontent-%COMP%]{display:block;max-width:100%}a[_ngcontent-%COMP%]{position:absolute;top:var(--logo-offset);left:var(--logo-offset);display:block;width:var(--logo-width)}nav[_ngcontent-%COMP%]{display:flex;padding:1.5em var(--var-padding);grid-row:1;grid-column:1;background:#fff}a[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{margin-left:2em}a[_ngcontent-%COMP%]{display:block;color:#333;text-decoration:none;border-bottom:1px solid #333}main[_ngcontent-%COMP%]{padding:var(--var-padding);grid-row:2;grid-column:1;background:#fff}sub[_ngcontent-%COMP%]{font-size:.5em}span[_ngcontent-%COMP%]{display:block;color:var(--highlight);font-weight:bolder}h1[_ngcontent-%COMP%]{margin-top:0;font-weight:400}*/[_ngcontent-%COMP%]   html[_ngcontent-%COMP%]{min-height:100vh;font-family:sans-serif;line-height:1.5;background:linear-gradient(45deg,hsl(30,6%,94%),hsl(20,9%,80%));background-repeat:no-repeat;background-size:cover}body[_ngcontent-%COMP%]{margin:0}@media (min-width: 37.5em){[_ngcontent-%COMP%]:root{--var-padding: 3em}body[_ngcontent-%COMP%]{margin:1em}.app[_ngcontent-%COMP%]{display:grid;margin:3em auto;grid-template-rows:5em auto;grid-template-columns:1.4fr 1fr;padding-left:2em;background-size:auto}.app[_ngcontent-%COMP%]:after{position:absolute;right:1em;left:1em;bottom:0;z-index:-1;width:95%;height:200px;content:\\\"\\\";box-shadow:0 0 5em #7d604f}header[_ngcontent-%COMP%]{height:auto}a[_ngcontent-%COMP%]{right:var(--logo-offset);left:auto}nav[_ngcontent-%COMP%]{justify-content:space-between}main[_ngcontent-%COMP%]{min-width:var(--main-column-width)}}\"]\n  });\n  return DetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}