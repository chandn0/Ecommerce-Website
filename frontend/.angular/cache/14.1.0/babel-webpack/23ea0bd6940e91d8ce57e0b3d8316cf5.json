{"ast":null,"code":"import _classCallCheck from \"C:/Users/boina/Desktop/Finalproject/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/boina/Desktop/Finalproject/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { ProductService } from '../../services/product.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CartService } from '../../services/cart.service';\nimport { CookieService } from 'ngx-cookie-service';\nimport { ProductInOrder } from '../../models/ProductInOrder';\nimport { WishListService } from 'src/app/services/wish-list.service';\nimport { UserService } from '../../services/user.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/product.service\";\nimport * as i2 from \"../../services/cart.service\";\nimport * as i3 from \"ngx-cookie-service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/services/wish-list.service\";\nimport * as i6 from \"../../services/user.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\n\nfunction DetailComponent_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function DetailComponent_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      var ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.handleRemoveFromWishList(ctx_r6.productInfo.productId));\n    });\n    i0.ɵɵtext(1, \"Remove from wishlist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function DetailComponent_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      var ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.handleAddToWishList(ctx_r8.productInfo.productId));\n    });\n    i0.ɵɵtext(1, \"Add to wishlist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetailComponent_button_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵtext(1, \"Add to Cart \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    var _r0 = i0.ɵɵreference(6);\n\n    i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\n  }\n}\n\nfunction DetailComponent_ng_template_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 13);\n    i0.ɵɵtext(1, \"Unavailable\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport var DetailComponent = /*#__PURE__*/(function () {\n  var DetailComponent = /*#__PURE__*/function () {\n    function DetailComponent(productService, cartService, cookieService, route, router, wishListService, userService) {\n      var _this = this;\n\n      _classCallCheck(this, DetailComponent);\n\n      this.productService = productService;\n      this.cartService = cartService;\n      this.cookieService = cookieService;\n      this.route = route;\n      this.router = router;\n      this.wishListService = wishListService;\n      this.userService = userService;\n      this.addedToWishlist = false;\n      this.userSubscription = this.userService.currentUser.subscribe(function (user) {\n        return _this.currentUser = user;\n      });\n    }\n\n    _createClass(DetailComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.getProduct();\n        this.title = 'Product Detail';\n        this.count = 1;\n      } // ngOnChanges(changes: SimpleChanges): void {\n      //   // Called before any other lifecycle hook. Use it to inject dependencies, but avoid any serious work here.\n      //   // Add '${implements OnChanges}' to the class.\n      //   console.log(changes);\n      //   if (this.item.quantity in changes) {\n      //   }\n      // }\n\n    }, {\n      key: \"getProduct\",\n      value: function getProduct() {\n        var _this2 = this;\n\n        var id = this.route.snapshot.paramMap.get('id');\n        this.productService.getDetail(id).subscribe(function (prod) {\n          _this2.productInfo = prod;\n        }, function (_) {\n          return console.log('Get Cart Failed');\n        });\n      }\n    }, {\n      key: \"addToCart\",\n      value: function addToCart() {\n        var _this3 = this;\n\n        this.cartService.addItem(new ProductInOrder(this.productInfo, this.count)).subscribe(function (res) {\n          if (!res) {\n            console.log('Add Cart failed' + res);\n            throw new Error();\n          }\n\n          _this3.router.navigateByUrl('/cart');\n        }, function (_) {\n          return console.log('Add Cart Failed');\n        });\n      }\n    }, {\n      key: \"validateCount\",\n      value: function validateCount() {\n        console.log('Validate');\n        var max = this.productInfo.productStock;\n\n        if (this.count > max) {\n          this.count = max;\n        } else if (this.count < 1) {\n          this.count = 1;\n        }\n      }\n    }, {\n      key: \"handleAddToWishList\",\n      value: function handleAddToWishList(productId) {\n        var _this4 = this;\n\n        console.log(\"started\");\n        this.cartService.addToWishList(productId).subscribe(function () {\n          _this4.addedToWishlist = true;\n        });\n        console.log(this.addedToWishlist);\n      }\n    }, {\n      key: \"handleRemoveFromWishList\",\n      value: function handleRemoveFromWishList(productId) {\n        var _this5 = this;\n\n        this.wishListService.removeFromWishList(productId).subscribe(function () {\n          _this5.addedToWishlist = false;\n        });\n      }\n    }]);\n\n    return DetailComponent;\n  }();\n\n  DetailComponent.ɵfac = function DetailComponent_Factory(t) {\n    return new (t || DetailComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.CartService), i0.ɵɵdirectiveInject(i3.CookieService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.WishListService), i0.ɵɵdirectiveInject(i6.UserService));\n  };\n\n  DetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DetailComponent,\n    selectors: [[\"app-detail\"]],\n    decls: 24,\n    vars: 8,\n    consts: [[1, \"app\"], [\"href\", \"\"], [3, \"src\"], [\"name\", \"form\", 3, \"ngSubmit\"], [\"form\", \"ngForm\"], [1, \"text-center\", 2, \"height\", \"40rem\"], [1, \"center\", 2, \"font-size\", \"1.5rem\"], [\"id\", \"price\", 1, \"center\"], [\"class\", \"btn btn-primary btn-lg\", \"style\", \"align-self: center;\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"submit\", \"class\", \"btn btn-primary btn-lg\", \"style\", \"align-self: center;margin-top: 1rem;\", 3, \"disabled\", 4, \"ngIf\", \"ngIfElse\"], [\"offBlock\", \"\"], [1, \"btn\", \"btn-primary\", \"btn-lg\", 2, \"align-self\", \"center\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 2, \"align-self\", \"center\", \"margin-top\", \"1rem\", 3, \"disabled\"], [1, \"btn\", \"btn-secondary\", \"btn-lg\", \"disabled\"]],\n    template: function DetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\")(2, \"a\", 1);\n        i0.ɵɵelement(3, \"img\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"main\")(5, \"form\", 3, 4);\n        i0.ɵɵlistener(\"ngSubmit\", function DetailComponent_Template_form_ngSubmit_5_listener() {\n          return (ctx.productInfo == null ? null : ctx.productInfo.productStatus) == 0 && ctx.addToCart();\n        });\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"h1\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"p\", 6);\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"br\");\n        i0.ɵɵelementStart(13, \"label\", 7);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"br\");\n        i0.ɵɵtemplate(16, DetailComponent_button_16_Template, 2, 0, \"button\", 8);\n        i0.ɵɵelement(17, \"br\");\n        i0.ɵɵtemplate(18, DetailComponent_button_18_Template, 2, 0, \"button\", 8);\n        i0.ɵɵelement(19, \"br\");\n        i0.ɵɵtemplate(20, DetailComponent_button_20_Template, 2, 1, \"button\", 9);\n        i0.ɵɵelement(21, \"br\");\n        i0.ɵɵtemplate(22, DetailComponent_ng_template_22_Template, 2, 0, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        var _r4 = i0.ɵɵreference(23);\n\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.productInfo == null ? null : ctx.productInfo.productIcon, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.productInfo == null ? null : ctx.productInfo.productName);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.productInfo == null ? null : ctx.productInfo.productDescription, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Price:\", ctx.productInfo == null ? null : ctx.productInfo.productPrice, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && ctx.addedToWishlist);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && !ctx.addedToWishlist);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", (ctx.productInfo == null ? null : ctx.productInfo.productStatus) == 0)(\"ngIfElse\", _r4);\n      }\n    },\n    dependencies: [i7.NgIf, i8.ɵNgNoValidate, i8.NgControlStatusGroup, i8.NgForm],\n    styles: [\"[_ngcontent-%COMP%]:root{--var-padding: 1em;--highlight: hsl(230, 38%, 46%);--highlight-dark: hsl(230, 38%, 36%);--logo-width: 6em;--logo-offset: 1em;--main-column-width: 25em}*[_ngcontent-%COMP%]{box-sizing:border-box}.app[_ngcontent-%COMP%]{position:relative;padding-left:.5em;max-width:60em;background:hsl(220,35%,76%) 100% linear-gradient(hsl(252,2%,42%) 0%,hsl(0,5%,30%) 50%,hsl(220,35%,76%) 50%,hsl(220,35%,76%) 100%);background-size:auto 10em;background-repeat:repeat-x;background-position:center top}header[_ngcontent-%COMP%]{position:relative;height:1rem;grid-row:1 / 3;grid-column:2;background:white;background-size:cover;background-position:right center}img[_ngcontent-%COMP%]{display:block;max-width:100%}a[_ngcontent-%COMP%]{position:absolute;top:var(--logo-offset);left:var(--logo-offset);display:block;width:var(--logo-width)}nav[_ngcontent-%COMP%]{display:flex;padding:1.5em var(--var-padding);grid-row:1;grid-column:1;background:#fff}a[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{margin-left:2em}a[_ngcontent-%COMP%]{display:block;color:#333;text-decoration:none;border-bottom:1px solid #333}main[_ngcontent-%COMP%]{padding:var(--var-padding);grid-row:2;grid-column:1;background:#fff}sub[_ngcontent-%COMP%]{font-size:.5em}span[_ngcontent-%COMP%]{display:block;color:var(--highlight);font-weight:bolder}h1[_ngcontent-%COMP%]{margin-top:0;font-weight:400}*/[_ngcontent-%COMP%]   html[_ngcontent-%COMP%]{min-height:100vh;font-family:sans-serif;line-height:1.5;background:linear-gradient(45deg,hsl(30,6%,94%),hsl(20,9%,80%));background-repeat:no-repeat;background-size:cover}body[_ngcontent-%COMP%]{margin:0}@media (min-width: 37.5em){[_ngcontent-%COMP%]:root{--var-padding: 3em}body[_ngcontent-%COMP%]{margin:1em}.app[_ngcontent-%COMP%]{display:grid;margin:3em auto;grid-template-rows:5em auto;grid-template-columns:1.4fr 1fr;padding-left:2em;background-size:auto}.app[_ngcontent-%COMP%]:after{position:absolute;right:1em;left:1em;bottom:0;z-index:-1;width:95%;height:200px;content:\\\"\\\";box-shadow:0 0 5em #7d604f}header[_ngcontent-%COMP%]{height:auto}a[_ngcontent-%COMP%]{right:var(--logo-offset);left:auto}nav[_ngcontent-%COMP%]{justify-content:space-between}main[_ngcontent-%COMP%]{min-width:var(--main-column-width)}}\"]\n  });\n  return DetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}