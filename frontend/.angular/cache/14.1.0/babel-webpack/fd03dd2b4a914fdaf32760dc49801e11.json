{"ast":null,"code":"import _classCallCheck from \"C:/Users/boina/Desktop/Finalproject/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/boina/Desktop/Finalproject/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ProductService } from '../../services/product.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CartService } from '../../services/cart.service';\nimport { CookieService } from 'ngx-cookie-service';\nimport { ProductInOrder } from '../../models/ProductInOrder';\nimport { WishListService } from 'src/app/services/wish-list.service';\nimport { UserService } from '../../services/user.service';\n\nvar DetailComponent = /*#__PURE__*/function () {\n  function DetailComponent(productService, cartService, cookieService, route, router, wishListService, userService) {\n    var _this = this;\n\n    _classCallCheck(this, DetailComponent);\n\n    this.productService = productService;\n    this.cartService = cartService;\n    this.cookieService = cookieService;\n    this.route = route;\n    this.router = router;\n    this.wishListService = wishListService;\n    this.userService = userService;\n    this.addedToWishlist = false;\n    this.userSubscription = this.userService.currentUser.subscribe(function (user) {\n      return _this.currentUser = user;\n    });\n  }\n\n  _createClass(DetailComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      this.getProduct();\n      this.title = 'Product Detail';\n      this.count = 1;\n    } // ngOnChanges(changes: SimpleChanges): void {\n    //   // Called before any other lifecycle hook. Use it to inject dependencies, but avoid any serious work here.\n    //   // Add '${implements OnChanges}' to the class.\n    //   console.log(changes);\n    //   if (this.item.quantity in changes) {\n    //   }\n    // }\n\n  }, {\n    key: \"getProduct\",\n    value: function getProduct() {\n      var _this2 = this;\n\n      var id = this.route.snapshot.paramMap.get('id');\n      this.productService.getDetail(id).subscribe(function (prod) {\n        _this2.productInfo = prod;\n      }, function (_) {\n        return console.log('Get Cart Failed');\n      });\n    }\n  }, {\n    key: \"addToCart\",\n    value: function addToCart() {\n      var _this3 = this;\n\n      this.cartService.addItem(new ProductInOrder(this.productInfo, this.count)).subscribe(function (res) {\n        if (!res) {\n          console.log('Add Cart failed' + res);\n          throw new Error();\n        }\n\n        _this3.router.navigateByUrl('/cart');\n      }, function (_) {\n        return console.log('Add Cart Failed');\n      });\n    }\n  }, {\n    key: \"validateCount\",\n    value: function validateCount() {\n      console.log('Validate');\n      var max = this.productInfo.productStock;\n\n      if (this.count > max) {\n        this.count = max;\n      } else if (this.count < 1) {\n        this.count = 1;\n      }\n    }\n  }, {\n    key: \"handleAddToWishList\",\n    value: function handleAddToWishList(productId) {\n      var _this4 = this;\n\n      console.log(\"started\");\n      this.cartService.addToWishList(productId).subscribe(function () {\n        _this4.addedToWishlist = true;\n      });\n      console.log(this.addedToWishlist);\n    }\n  }, {\n    key: \"handleRemoveFromWishList\",\n    value: function handleRemoveFromWishList(productId) {\n      var _this5 = this;\n\n      this.wishListService.removeFromWishList(productId).subscribe(function () {\n        _this5.addedToWishlist = false;\n      });\n    }\n  }]);\n\n  return DetailComponent;\n}();\n\nDetailComponent = __decorate([Component({\n  selector: 'app-detail',\n  templateUrl: './detail.component.html',\n  styleUrls: ['./detail.component.css']\n}), __metadata(\"design:paramtypes\", [ProductService, CartService, CookieService, ActivatedRoute, Router, WishListService, UserService])], DetailComponent);\nexport { DetailComponent };","map":null,"metadata":{},"sourceType":"module"}