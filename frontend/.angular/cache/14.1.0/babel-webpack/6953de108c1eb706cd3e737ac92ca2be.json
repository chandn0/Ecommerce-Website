{"ast":null,"code":"import _classCallCheck from \"C:/Users/boina/Desktop/working/ecommerce-eshop/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/boina/Desktop/working/ecommerce-eshop/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { CartService } from '../../services/cart.service';\nimport { Subscription } from 'rxjs';\nimport { UserService } from '../../services/user.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ProductService } from 'src/app/services/product.service';\nimport { ProductInfo } from 'src/app/models/productInfo';\nimport { WishListService } from 'src/app/services/wish-list.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cart.service\";\nimport * as i2 from \"../../services/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/product.service\";\nimport * as i5 from \"src/app/services/wish-list.service\";\nimport * as i6 from \"@angular/common\";\n\nfunction WishListComponent_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 6)(2, \"a\", 7);\n    i0.ɵɵelement(3, \"img\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\", 9);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 9)(8, \"button\", 10)(9, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function WishListComponent_tr_12_Template_a_click_9_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var productInOrder_r3 = restoredCtx.$implicit;\n      var ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.handleRemoveFromWishList(productInOrder_r3.product.productId));\n    });\n    i0.ɵɵtext(10, \"Remove\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    var productInOrder_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/product/\", productInOrder_r3.product.productId, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", productInOrder_r3.product.productIcon, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", productInOrder_r3.product.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 4, productInOrder_r3.product.productPrice));\n  }\n}\n\nfunction WishListComponent_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\", 12);\n    i0.ɵɵtext(1, \"Wishlist is empty)\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport var WishListComponent = /*#__PURE__*/(function () {\n  var WishListComponent = /*#__PURE__*/function () {\n    function WishListComponent(cartService, userService, route, router, productService, wishListService) {\n      var _this = this;\n\n      _classCallCheck(this, WishListComponent);\n\n      this.cartService = cartService;\n      this.userService = userService;\n      this.route = route;\n      this.router = router;\n      this.productService = productService;\n      this.wishListService = wishListService;\n      this.productInfo = [];\n      this.total = 0;\n      this.addedToWishlist = false;\n      this.product = new ProductInfo();\n      this.isEdit = false;\n      this.userSubscription = this.userService.currentUser.subscribe(function (user) {\n        return _this.currentUser = user;\n      });\n    }\n\n    _createClass(WishListComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this2 = this;\n\n        /* this.productId = this.route.snapshot.paramMap.get('id');\r\n          console.log(this.productId);\r\n         if (this.productId) {\r\n             this.isEdit = true;\r\n             this.productService.getDetail(this.productId).subscribe(prod => this.product = prod);\r\n         } */\n        this.querySub = this.route.queryParams.subscribe(function () {\n          _this2.update();\n        });\n      }\n    }, {\n      key: \"update\",\n      value: function update() {\n        var _this3 = this;\n\n        var nextPage = 1;\n        var size = 10;\n\n        if (this.route.snapshot.queryParamMap.get('page')) {\n          nextPage = +this.route.snapshot.queryParamMap.get('page');\n          size = +this.route.snapshot.queryParamMap.get('size');\n        }\n\n        this.wishListService.getPage(nextPage, size).subscribe(function (page) {\n          return _this3.page = page;\n        }, function (_) {\n          console.log(\"Get Orde Failed\");\n        });\n        console.log(this.page);\n      }\n    }, {\n      key: \"OnDestroy\",\n      value: function OnDestroy() {}\n    }, {\n      key: \"AfterContentChecked\",\n      value: function AfterContentChecked() {}\n    }, {\n      key: \"handleRemoveFromWishList\",\n      value: function handleRemoveFromWishList(productId) {\n        var _this4 = this;\n\n        console.log(productId);\n        this.wishListService.removeFromWishList(productId).subscribe(function (success) {\n          _this4.update();\n        }, function (_) {\n          return console.log('Remove Cart Failed');\n        });\n      }\n    }]);\n\n    return WishListComponent;\n  }();\n\n  WishListComponent.ɵfac = function WishListComponent_Factory(t) {\n    return new (t || WishListComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ProductService), i0.ɵɵdirectiveInject(i5.WishListService));\n  };\n\n  WishListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: WishListComponent,\n    selectors: [[\"app-wish-list\"]],\n    decls: 15,\n    vars: 1,\n    consts: [[\"align\", \"center\", 1, \"display-4\", \"mb-5\", 2, \"background-color\", \"red\"], [1, \"table\", \"text-center\"], [2, \"padding\", \"3px\"], [\"scope\", \"col\", 2, \"color\", \"blue\", \"font-size\", \"2rem\"], [4, \"ngFor\", \"ngForOf\"], [\"empty\", \"\"], [\"scope\", \"row\", 1, \"align-middle\"], [3, \"routerLink\"], [\"height\", \"100px\", 3, \"src\", \"alt\"], [1, \"align-middle\"], [2, \"background-color\", \"blue\", \"color\", \"white\", \"border-radius\", \"10px\"], [\"routerLink\", \"/wishlist\", 3, \"click\"], [1, \"text-muted\", \"text-center\"]],\n    template: function WishListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\", 0);\n        i0.ɵɵtext(1, \"My WishList\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"table\", 1)(3, \"thead\")(4, \"tr\", 2)(5, \"th\", 3);\n        i0.ɵɵtext(6, \"Photo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"th\", 3);\n        i0.ɵɵtext(8, \"Price\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"th\", 3);\n        i0.ɵɵtext(10, \"Action\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(11, \"tbody\");\n        i0.ɵɵtemplate(12, WishListComponent_tr_12_Template, 11, 6, \"tr\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(13, WishListComponent_ng_template_13_Template, 2, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngForOf\", ctx.page == null ? null : ctx.page.content);\n      }\n    },\n    dependencies: [i6.NgForOf, i3.RouterLinkWithHref, i6.CurrencyPipe]\n  });\n  return WishListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}