{"ast":null,"code":"import _classCallCheck from \"C:/Users/boina/Desktop/working/ecommerce-eshop/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/boina/Desktop/working/ecommerce-eshop/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { OrderService } from \"../../services/order.service\";\nimport { OrderStatus } from \"../../enum/OrderStatus\";\nimport { UserService } from \"../../services/user.service\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { Role } from \"../../enum/Role\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../services/order.service\";\nimport * as i3 from \"../../services/user.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../parts/pagination/pagination.component\";\n\nfunction OrderComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 2);\n    i0.ɵɵtext(1, \"Status\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 2);\n    i0.ɵɵtext(1, \"Action\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_tr_14_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var order_r3 = i0.ɵɵnextContext().$implicit;\n    var ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.OrderStatus[order_r3.orderStatus], \"\");\n  }\n}\n\nfunction OrderComponent_tr_14_td_10_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 10);\n    i0.ɵɵtext(1, \" Show\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var order_r3 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/order/\", order_r3.orderId, \"\");\n  }\n}\n\nfunction OrderComponent_tr_14_td_10_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function OrderComponent_tr_14_td_10_a_2_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      var order_r3 = i0.ɵɵnextContext(2).$implicit;\n      var ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.cancel(order_r3));\n    });\n    i0.ɵɵtext(1, \"Cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_tr_14_td_10_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function OrderComponent_tr_14_td_10_a_3_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      var order_r3 = i0.ɵɵnextContext(2).$implicit;\n      var ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.finish(order_r3));\n    });\n    i0.ɵɵtext(1, \" Finish\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_tr_14_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 6);\n    i0.ɵɵtemplate(1, OrderComponent_tr_14_td_10_a_1_Template, 2, 1, \"a\", 8);\n    i0.ɵɵtemplate(2, OrderComponent_tr_14_td_10_a_2_Template, 2, 0, \"a\", 9);\n    i0.ɵɵtemplate(3, OrderComponent_tr_14_td_10_a_3_Template, 2, 0, \"a\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var order_r3 = i0.ɵɵnextContext().$implicit;\n    var ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r5.currentUser.role == ctx_r5.Role.Customer && ctx_r5.currentUser.name == order_r3.buyerEmail));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", order_r3.orderStatus == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.currentUser.role != ctx_r5.Role.Customer && order_r3.orderStatus == 0);\n  }\n}\n\nfunction OrderComponent_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 6);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 6);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, OrderComponent_tr_14_td_9_Template, 2, 1, \"td\", 7);\n    i0.ɵɵtemplate(10, OrderComponent_tr_14_td_10_Template, 4, 3, \"td\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var order_r3 = ctx.$implicit;\n    var ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r3.buyerAddress);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 5, order_r3.orderAmount));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 7, order_r3.createTime));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.currentUser.role != ctx_r2.Role.Customer && order_r3.orderStatus == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.currentUser.role != ctx_r2.Role.Customer && order_r3.orderStatus == 0);\n  }\n}\n\nexport var OrderComponent = /*#__PURE__*/(function () {\n  var OrderComponent = /*#__PURE__*/function () {\n    function OrderComponent(httpClient, orderService, userService, route) {\n      _classCallCheck(this, OrderComponent);\n\n      this.httpClient = httpClient;\n      this.orderService = orderService;\n      this.userService = userService;\n      this.route = route;\n      this.OrderStatus = OrderStatus;\n      this.Role = Role;\n    }\n\n    _createClass(OrderComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this.currentUser = this.userService.currentUserValue;\n        this.querySub = this.route.queryParams.subscribe(function () {\n          _this.update();\n        });\n      }\n    }, {\n      key: \"update\",\n      value: function update() {\n        var _this2 = this;\n\n        var nextPage = 1;\n        var size = 10;\n\n        if (this.route.snapshot.queryParamMap.get('page')) {\n          nextPage = +this.route.snapshot.queryParamMap.get('page');\n          size = +this.route.snapshot.queryParamMap.get('size');\n        }\n\n        this.orderService.getPage(nextPage, size).subscribe(function (page) {\n          return _this2.page = page;\n        }, function (_) {\n          console.log(\"Get Orde Failed\");\n        });\n      }\n    }, {\n      key: \"cancel\",\n      value: function cancel(order) {\n        this.orderService.cancel(order.orderId).subscribe(function (res) {\n          if (res) {\n            order.orderStatus = res.orderStatus;\n          }\n        });\n      }\n    }, {\n      key: \"finish\",\n      value: function finish(order) {\n        this.orderService.finish(order.orderId).subscribe(function (res) {\n          if (res) {\n            order.orderStatus = res.orderStatus;\n          }\n        });\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {}\n    }]);\n\n    return OrderComponent;\n  }();\n\n  OrderComponent.ɵfac = function OrderComponent_Factory(t) {\n    return new (t || OrderComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.OrderService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n  };\n\n  OrderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderComponent,\n    selectors: [[\"app-order\"]],\n    decls: 16,\n    vars: 4,\n    consts: [[\"align\", \"center\", 1, \"display-4\", \"mb-5\"], [1, \"table\", \"text-center\"], [\"scope\", \"col\"], [\"scope\", \"col\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"currentPage\"], [1, \"align-middle\"], [\"class\", \"align-middle\", 4, \"ngIf\"], [\"style\", \"display:\\n            block\", \"href\", \"\", 3, \"routerLink\", 4, \"ngIf\"], [\"style\", \"display: block\", \"routerLink\", \"./\", 3, \"click\", 4, \"ngIf\"], [\"href\", \"\", 2, \"display\", \"block\", 3, \"routerLink\"], [\"routerLink\", \"./\", 2, \"display\", \"block\", 3, \"click\"]],\n    template: function OrderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\", 0);\n        i0.ɵɵtext(1, \"Orders\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"table\", 1)(3, \"thead\")(4, \"tr\")(5, \"th\", 2);\n        i0.ɵɵtext(6, \"Shipping Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"th\", 2);\n        i0.ɵɵtext(8, \"Total\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"th\", 2);\n        i0.ɵɵtext(10, \"Order Data\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, OrderComponent_th_11_Template, 2, 0, \"th\", 3);\n        i0.ɵɵtemplate(12, OrderComponent_th_12_Template, 2, 0, \"th\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"tbody\");\n        i0.ɵɵtemplate(14, OrderComponent_tr_14_Template, 11, 9, \"tr\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(15, \"app-pagination\", 5);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser.role != ctx.Role.Customer);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser.role != ctx.Role.Customer);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.page == null ? null : ctx.page.content);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"currentPage\", ctx.page);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i4.RouterLinkWithHref, i6.PaginationComponent, i5.CurrencyPipe, i5.DatePipe]\n  });\n  return OrderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}